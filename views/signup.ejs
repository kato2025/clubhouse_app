<!DOCTYPE html>
<html lang="en">
<head>
    <title>Sign Up</title>
    <style>
        .alert {
            margin: 1rem 0;
            padding: 0.75rem 1.25rem;
            border: 1px solid transparent;
            border-radius: 0.25rem;
        }
        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
            text-align: center;
        }
        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        input[type="text"] {
            text-transform: none; /* Prevent capitalization */
        }
    </style>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="signup">
    <h1 class="signupHeading">Sign Up</h1>

    <!-- Error and Success Messages -->
    <% if (messages.error && messages.error.length > 0) { %>
        <% messages.error.forEach(err => { %>
            <div class="alert alert-danger" role="alert">
                <%= err %>
            </div>
        <% }); %>
    <% } %>
    <% if (messages.success && messages.success.length > 0) { %>
        <% messages.success.forEach(msg => { %>
            <div class="alert alert-success" role="alert">
                <%= msg %>
            </div>
        <% }); %>
    <% } %>

    <!-- Signup Form -->
    <form class="signupForm" action="/signup" method="post" onsubmit="return validatePasswords()">
        <!-- Name Field -->
        <div class="formGroup">
            <label class="formLabel" for="name">Name:</label>
            <small id="nameHelp" class="formText">Your full name as in your identification document.</small>
            <input 
                type="text" 
                id="name" 
                name="name" 
                placeholder="Enter your full name" 
                required 
                autocapitalize="words" 
                spellcheck="false"
                aria-describedby="nameHelp">
        </div>

        <!-- Username Field -->
        <div class="formGroup">
            <label class="formLabel" for="username">Username:</label>
            <small id="usernameHelp" class="formText">Choose a unique username for login.</small>
            <input 
                type="text" 
                id="username" 
                name="username" 
                placeholder="Enter your username" 
                required 
                autocapitalize="none" 
                spellcheck="false" 
                style="text-transform: none;" 
                aria-describedby="usernameHelp">
        </div>

        <!-- Password Field -->
        <div class="formGroup">
            <label class="formLabel" for="password">Password:</label>
            <small id="passwordHelp" class="formText">Use at least 8 characters, with a mix of letters and numbers.</small>
            <input 
                type="password" 
                id="password" 
                name="password" 
                placeholder="Enter a secure password" 
                required
                aria-describedby="passwordHelp">
        </div>

        <!-- Confirm Password Field -->
        <div class="formGroup">
            <label class="formLabel" for="confirmPassword">Confirm Password:</label>
            <input 
                type="password" 
                id="confirmPassword" 
                name="confirmPassword" 
                placeholder="Re-enter your password" 
                required>
        </div>

        <!-- Submit Button -->
        <button class="submitUser btn btn-primary" type="submit">Sign Up</button>
        <!-- Footer Links -->
        <div class="loginFooter">
            <p>Already a member? <a class="backToLogin" href="/login">Login here</a></p>
        </div>
    </form>

    <a class="backToHome btn btn-secondary" href="/">Back to Home</a>

    <!-- Password Validation Script -->
    <script>
        function validatePasswords() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password.length < 8) {
                alert('Password must be at least 8 characters long.');
                return false;
            }

            if (password !== confirmPassword) {
                alert('Passwords do not match. Please try again.');
                return false;
            }

            return true;
        }
    </script>
</body>

</html>
